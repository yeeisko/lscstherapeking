<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Upload and Zip Files</title>
<script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
</head>
<body>
<h2>Upload files and download as ZIP</h2>

<form id="zipForm">
  <input type="file" id="files" multiple required /><br /><br />
  <input 
    type="text" 
    id="zipName" 
    placeholder="Enter zip file name (without .zip)" 
    required 
  />
  <button type="submit">Create ZIP and Download</button>
</form>

<script>
document.getElementById('zipForm').addEventListener('submit', async e => {
  e.preventDefault();

  const files = document.getElementById('files').files;
  const zipNameInput = document.getElementById('zipName').value.trim();

  // Set max number of files to accept
  const maxFiles = 5;

  if (!zipNameInput) {
    alert('Please enter a valid zip file name');
    return;
  }
  if (files.length === 0) {
    alert('Please select at least one file');
    return;
  }
  if (files.length > maxFiles) {
    alert(`Please upload no more than ${maxFiles} files`);
    return;
  }

  const zip = new JSZip();

  for (const file of files) {
    const content = await file.arrayBuffer();
    zip.file(file.name, content);
  }

  zip.generateAsync({ type: "blob" }).then(content => {
    const link = document.createElement('a');
    link.href = URL.createObjectURL(content);
    link.download = zipNameInput + '.zip';
    document.body.appendChild(link);
    link.click();
    link.remove();
  });
});
</script>

</body>
</html>
