<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8">
Â  <title>Secure File Upload</title>
Â  <style>
Â Â Â  body {
Â Â Â Â Â  font-family: Arial, sans-serif;
Â Â Â Â Â  padding: 20px;
Â Â Â Â Â  max-width: 800px;
Â Â Â Â Â  margin: 0 auto;
Â Â Â  }
Â Â Â  .upload-container {
Â Â Â Â Â  border: 2px dashed #ccc;
Â Â Â Â Â  border-radius: 8px;
Â Â Â Â Â  padding: 40px;
Â Â Â Â Â  text-align: center;
Â Â Â Â Â  background-color: #f9f9f9;
Â Â Â Â Â  margin-bottom: 20px;
Â Â Â  }
Â Â Â  .upload-container:hover {
Â Â Â Â Â  border-color: #007bff;
Â Â Â Â Â  background-color: #f0f8ff;
Â Â Â  }
Â Â Â  input[type="file"] {
Â Â Â Â Â  margin: 10px 0;
Â Â Â Â Â  padding: 10px;
Â Â Â Â Â  border: 1px solid #ddd;
Â Â Â Â Â  border-radius: 4px;
Â Â Â Â Â  width: 100%;
Â Â Â Â Â  max-width: 400px;
Â Â Â  }
Â Â Â  button {
Â Â Â Â Â  background-color: #007bff;
Â Â Â Â Â  color: white;
Â Â Â Â Â  padding: 12px 24px;
Â Â Â Â Â  border: none;
Â Â Â Â Â  border-radius: 4px;
Â Â Â Â Â  cursor: pointer;
Â Â Â Â Â  font-size: 16px;
Â Â Â Â Â  margin-top: 10px;
Â Â Â  }
Â Â Â  button:hover {
Â Â Â Â Â  background-color: #0056b3;
Â Â Â  }
Â Â Â  button:disabled {
Â Â Â Â Â  background-color: #ccc;
Â Â Â Â Â  cursor: not-allowed;
Â Â Â  }
Â Â Â  #responseBox {
Â Â Â Â Â  margin-top: 20px;
Â Â Â Â Â  padding: 15px;
Â Â Â Â Â  border: 1px solid #ccc;
Â Â Â Â Â  background-color: #f9f9f9;
Â Â Â Â Â  border-radius: 4px;
Â Â Â Â Â  min-height: 50px;
Â Â Â  }
Â Â Â  .success {
Â Â Â Â Â  color: #28a745;
Â Â Â Â Â  background-color: #d4edda;
Â Â Â Â Â  border-color: #c3e6cb;
Â Â Â  }
Â Â Â  .error {
Â Â Â Â Â  color: #dc3545;
Â Â Â Â Â  background-color: #f8d7da;
Â Â Â Â Â  border-color: #f5c6cb;
Â Â Â  }
Â Â Â  .info {
Â Â Â Â Â  color: #17a2b8;
Â Â Â Â Â  background-color: #d1ecf1;
Â Â Â Â Â  border-color: #bee5eb;
Â Â Â  }
Â Â Â  .file-info {
Â Â Â Â Â  background-color: white;
Â Â Â Â Â  padding: 10px;
Â Â Â Â Â  border-radius: 4px;
Â Â Â Â Â  margin-top: 10px;
Â Â Â  }
Â Â Â  .file-info ul {
Â Â Â Â Â  list-style: none;
Â Â Â Â Â  padding: 0;
Â Â Â  }
Â Â Â  .file-info li {
Â Â Â Â Â  padding: 5px 0;
Â Â Â Â Â  border-bottom: 1px solid #eee;
Â Â Â  }
Â Â Â  .file-info li:last-child {
Â Â Â Â Â  border-bottom: none;
Â Â Â  }
Â Â Â  .progress-bar {
Â Â Â Â Â  width: 100%;
Â Â Â Â Â  height: 20px;
Â Â Â Â Â  background-color: #f0f0f0;
Â Â Â Â Â  border-radius: 10px;
Â Â Â Â Â  overflow: hidden;
Â Â Â Â Â  margin: 10px 0;
Â Â Â Â Â  display: none;
Â Â Â  }
Â Â Â  .progress-fill {
Â Â Â Â Â  height: 100%;
Â Â Â Â Â  background-color: #007bff;
Â Â Â Â Â  transition: width 0.3s ease;
Â Â Â  }
Â  </style>
</head>
<body>
Â  <h2>ğŸ”’ Secure File Upload</h2>
Â  <div class="upload-container">
Â Â Â  <form id="uploadForm">
Â Â Â Â Â  <h3>Select a file to upload</h3>
Â Â Â Â Â  <input type="file" id="fileInput" name="file" required>
Â Â Â Â Â  <br>
Â Â Â Â Â  <button type="submit" id="uploadBtn">Upload File</button>
Â Â Â  </form>
Â Â Â  <div class="progress-bar" id="progressBar">
Â Â Â Â Â  <div class="progress-fill" id="progressFill"></div>
Â Â Â  </div>
Â  </div>

Â  <div id="responseBox">
Â Â Â  <p class="info">Select a file and click upload to begin.</p>
Â  </div>

Â  <script>
Â Â Â  const form = document.getElementById('uploadForm');
Â Â Â  const responseBox = document.getElementById('responseBox');
Â Â Â  const uploadBtn = document.getElementById('uploadBtn');
Â Â Â  const progressBar = document.getElementById('progressBar');
Â Â Â  const progressFill = document.getElementById('progressFill');

Â Â Â  form.addEventListener('submit', async (e) => {
Â Â Â Â Â  e.preventDefault();

Â Â Â Â Â  const fileInput = document.getElementById('fileInput');
Â Â Â Â Â  const file = fileInput.files[0];

Â Â Â Â Â  if (!file) {
Â Â Â Â Â Â Â  showResponse('Please select a file.', 'error');
Â Â Â Â Â Â Â  return;
Â Â Â Â Â  }

Â Â Â Â Â  // Show upload progress
Â Â Â Â Â  uploadBtn.disabled = true;
Â Â Â Â Â  uploadBtn.textContent = 'Uploading...';
Â Â Â Â Â  progressBar.style.display = 'block';
Â Â Â Â Â  progressFill.style.width = '0%';
Â Â Â Â Â  
Â Â Â Â Â  showResponse('Uploading file, please wait...', 'info');

Â Â Â Â Â  const formData = new FormData();
Â Â Â Â Â  formData.append('file', file);

Â Â Â Â Â  try {
Â Â Â Â Â Â Â  const xhr = new XMLHttpRequest();
Â Â Â Â Â Â Â  
Â Â Â Â Â Â Â  // Progress tracking
Â Â Â Â Â Â Â  xhr.upload.addEventListener('progress', (e) => {
Â Â Â Â Â Â Â Â Â  if (e.lengthComputable) {
Â Â Â Â Â Â Â Â Â Â Â  const percentComplete = (e.loaded / e.total) * 100;
Â Â Â Â Â Â Â Â Â Â Â  progressFill.style.width = percentComplete + '%';
Â Â Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â  });

Â Â Â Â Â Â Â  xhr.onload = function() {
Â Â Â Â Â Â Â Â Â  progressBar.style.display = 'none';uploadBtn.disabled = false;
Â Â Â Â Â Â Â Â Â  uploadBtn.textContent = 'Upload File';
Â Â Â Â Â Â Â Â Â  
Â Â Â Â Â Â Â Â Â  try {
Â Â Â Â Â Â Â Â Â Â Â  const data = JSON.parse(xhr.responseText);
Â Â Â Â Â Â Â Â Â Â Â  
Â Â Â Â Â Â Â Â Â Â Â  if (data.success) {
Â Â Â Â Â Â Â Â Â Â Â Â Â  const fileInfo = data.data;
Â Â Â Â Â Â Â Â Â Â Â Â Â  const successHtml = `
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <p><strong>âœ… ${data.message}</strong></p>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <div class="file-info">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <ul>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <li><strong>Original Filename:</strong> ${fileInfo.original_filename}</li>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <li><strong>Saved Filename:</strong> ${fileInfo.saved_filename}</li>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <li><strong>File URL:</strong> <a href="${fileInfo.file_url}" target="_blank">${fileInfo.file_url}</a></li>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <li><strong>File Size:</strong> ${(fileInfo.file_size / 1024).toFixed(2)} KB</li>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  <li><strong>Upload Time:</strong> ${fileInfo.upload_time}</li>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  </ul>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â  `;
Â Â Â Â Â Â Â Â Â Â Â Â Â  showResponse(successHtml, 'success');
Â Â Â Â Â Â Â Â Â Â Â  } else {
Â Â Â Â Â Â Â Â Â Â Â Â Â  showResponse(`âŒ Error: ${data.error}`, 'error');
Â Â Â Â Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â Â Â  } catch (parseError) {
Â Â Â Â Â Â Â Â Â Â Â  showResponse(`âŒ Upload failed: Invalid server response`, 'error');
Â Â Â Â Â Â Â Â Â  }
Â Â Â Â Â Â Â  };

Â Â Â Â Â Â Â  xhr.onerror = function() {
Â Â Â Â Â Â Â Â Â  progressBar.style.display = 'none';
Â Â Â Â Â Â Â Â Â  uploadBtn.disabled = false;
Â Â Â Â Â Â Â Â Â  uploadBtn.textContent = 'Upload File';
Â Â Â Â Â Â Â Â Â  showResponse('âŒ Network error occurred during upload', 'error');
Â Â Â Â Â Â Â  };

Â Â Â Â Â Â Â  xhr.open('POST', 'https://europe.serenityios.com/dashboard-lscs3/upload.php');
Â Â Â Â Â Â Â  xhr.send(formData);

Â Â Â Â Â  } catch (error) {
Â Â Â Â Â Â Â  progressBar.style.display = 'none';
Â Â Â Â Â Â Â  uploadBtn.disabled = false;
Â Â Â Â Â Â Â  uploadBtn.textContent = 'Upload File';
Â Â Â Â Â Â Â  showResponse(`âŒ Upload failed: ${error.message}`, 'error');
Â Â Â Â Â  }
Â Â Â  });

Â Â Â  function showResponse(message, type) {
Â Â Â Â Â  responseBox.innerHTML = <div class="${type}">${message}</div>;
Â Â Â Â Â  responseBox.className = ${type};
Â Â Â  }

Â Â Â  // File input change event for validation
Â Â Â  document.getElementById('fileInput').addEventListener('change', function(e) {
Â Â Â Â Â  const file = e.target.files[0];
Â Â Â Â Â  if (file) {
Â Â Â Â Â Â Â  const maxSize = 10 * 1024 * 1024; // 10MB
Â Â Â Â Â Â Â  if (file.size > maxSize) {
Â Â Â Â Â Â Â Â Â  showResponse('âŒ File too large. Maximum size is 10MB.', 'error');
Â Â Â Â Â Â Â Â Â  e.target.value = '';
Â Â Â Â Â Â Â  } else {
Â Â Â Â Â Â Â Â Â  showResponse(`ğŸ“„ Selected: ${file.name} (${(file.size / 1024).toFixed(2)} KB)`, 'info');
Â Â Â Â Â Â Â  }
Â Â Â Â Â  }
Â Â Â  });
Â  </script>
</body>
</html>
